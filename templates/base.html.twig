<!DOCTYPE html>
<html>
	<head>
		<meta charset='UTF-8'/>
		<title>
			{% block title %}
				Welcome!
			{% endblock %}
		</title>
		<link rel='icon' href='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>'/>
		{% block stylesheets %}
			{{ encore_entry_link_tags('app') }}
		{% endblock %}

		{% block javascripts %}
			{{ encore_entry_script_tags('app') }}
		{% endblock %}
	</head>

	<body>
		<nav>
			<ul>
				{% for entity in entities %}
					<li>
						<a href="{{ path(entity.route, entity.params) }}">
							{{ entity.name }}
						</a>
					</li>
				{% endfor %}
			</ul>
		</nav>

		<div class='flex-shrink-0 p-3 bg-white' style='width: 280px;'>
			<a href='/' class='d-flex align-items-center pb-3 mb-3 link-dark text-decoration-none border-bottom'>
				<span class='fs-5 fw-semibold'>Ordo</span>
			</a>

			<ul class='list-unstyled ps-0'>
				<li class='mb-3 border-bottom'>
					<a href='/' class='collapse-summary link-dark rounded'>Home</a>
				</li>

				<li class='list-item mb-3'>
					<div class='summary-container d-flex align-items-center'>
						<div class='collapse-summary'>Spaces</div>
						<div class='dropdown'>
							<span class='dropdown-toggle' id='dropdown-space-root' data-bs-toggle='dropdown' aria-expanded='false'>
								<twig:ux:icon name='radix-icons:dots-horizontal'/>
							</span>
							<ul class='dropdown-menu text-small shadow' aria-labelledby='#dropdown-space-root' style=''>
								<li class='open-modal-space dropdown-item' data-bs-toggle='modal' data-bs-target='#modal-space' data-mode='new'>New Space</li>
							</ul>
						</div>
					</div>
					<ul class='list list-unstyled ps-0 btn-toggle-nav'>
						{% macro render_space(space, spaces) %}
							{% set children = spaces|filter(s => s.parent and s.parent.id == space.id) %}
							<li class='list-item mb-1'>
								<div class='summary-container d-flex align-items-center'>
									{% if children is not empty %}
										<button class='btn btn-toggle align-items-center rounded collapsed' data-bs-toggle='collapse' data-bs-target="{{ '#collapse-space-' ~ space.id }}" aria-expanded='false'>
											<twig:ux:icon name='radix-icons:caret-right'/>
										</button>
									{% endif %}
									<a href="{{ path('app_entity_show', { class: space|class_name|lower, id: space.id }) }}" class='collapse-summary link-dark rounded'>{{ space.name }}</a>
									<div class='dropdown'>
										<span class='dropdown-toggle rounded' id="{{ 'dropdown-space-' ~ space.id }}" data-bs-toggle='dropdown' aria-expanded='false'>
											<twig:ux:icon name='radix-icons:dots-horizontal'/>
										</span>
										<ul class='dropdown-menu text-small shadow' aria-labelledby="{{ '#dropdown-space-' ~ space.id }}" style=''>
											<li class='open-modal-space dropdown-item' data-bs-toggle='modal' data-bs-target='#modal-space' data-mode='new' data-id="{{ space.id }}">New Child</li>
											<li class='open-modal-space dropdown-item' data-bs-toggle='modal' data-bs-target='#modal-space' data-mode='edit' data-id="{{ space.id }}">Edit</li>
											<li>
												<a href="{{ path('app_entity_delete', { class: space|class_name|lower, id: space.id }) }}" class='open-modal-space dropdown-item' onclick='return confirm("Do you really want to delete this item?");'>Delete</a>
											</li>
										</ul>
									</div>
								</div>

								{% if children is not empty %}
									<div class='collapse' id="{{ 'collapse-space-' ~ space.id }}">
										<ul class='list btn-toggle-nav list-unstyled fw-normal pb-1'>
											{% for child in children %}
												{{ _self.render_space(child, spaces) }}
											{% endfor %}
										</ul>
									</div>
								{% endif %}
							</li>
						{% endmacro %}

						{% import _self as macros %}
						{% for space in spaces %}
							{% if space.parent is null %}
								{{ macros.render_space(space, spaces) }}
							{% endif %}
						{% endfor %}
					</ul>
				</li>
			</ul>

			<twig:Modal id='space' title='New Space'>
				<twig:block name='body'>
					{{ form_start(spaceForm, {'attr': {
						'id': 'form-space',
						'data-new-action': path('app_entity_new', {'class': 'space'}),
						'data-edit-action': path('app_entity_edit', {'class': 'space', 'id': 'PLACEHOLDER'})}
					}) }}
					{{ form_widget(spaceForm) }}
					{{ form_end(spaceForm) }}
				</twig:block>

				<twig:block name='footer'>
					<button type='submit' form='form-space' id='submit-form-space' class='btn btn-primary'>Save</button>
				</twig:block>
			</twig:Modal>
		</body>
	</body>
</html></body></html></div><main><h1>{{ block('title') }}</h1>{% block body %}{% endblock %}</main></body></html>
